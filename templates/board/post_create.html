{% extends "layout/base.html" %}
{% load static %}

{% block title %}
  글 작성 - 뭐입지?
{% endblock title %}

{% block head %}
  {% include "layout/head.html" %}
{% endblock head %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/board.css' %}">
{% endblock extra_css %}


{% block navi %}
  {% include "layout/navbar.html" %}
{% endblock navi %}

{% block content %}
<div class="container my-5">
  <h2 class="mb-4">글 작성</h2>
  <form method="post" id="post-form" enctype="multipart/form-data">
    {% csrf_token %}

    <div class="mb-3">
      <label for="category" class="form-label">카테고리</label>
      <select name="category" id="category" class="form-select" required>
        <option value="일반">일반</option>
        <option value="코디">코디</option>
      </select>
    </div>

    <div class="mb-3">
      <label for="title" class="form-label">제목</label>
      <input type="text" name="title" id="title" class="form-control" required>
    </div>

    <div class="mb-3">
      <label for="content" class="form-label">내용</label>
      <textarea name="content" id="content" class="form-control" rows="8" required></textarea>
    </div>

    <div class="mb-3">
        <!-- 감춘 input -->
        <input type="file" name="images" id="image" class="d-none" multiple>

        <!-- 커스텀 버튼과 텍스트 -->
        <div class="d-flex align-items-center gap-2 mb-2">
          <label for="image" class="btn btn-outline-secondary">파일 선택</label>
          <span id="file-count" class="text-muted">선택된 파일: 0개</span>
        </div>

        <!-- 미리보기용 이미지 -->
        <div id="preview-container" class="mt-3 d-flex flex-wrap gap-2"></div>
    </div>

    <button type="submit" class="btn btn-primary">작성하기</button>
    <a href="{% url 'board:post_list' %}" class="btn btn-secondary">취소</a>
  </form>
</div>
{% endblock content %}


{% block footer %}
  {% include "layout/footer.html" %}
{% endblock footer %}


{% block script %}
  <script src="{% static 'js/board/post_create.js' %}"></script>
{% endblock script %}